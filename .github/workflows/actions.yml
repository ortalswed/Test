name: Actions workflow
on: 
  push:
  #pull_request:
  #  types: [closed, assigned, opened, repoened]
env:
  WF_ENV: ${{secrets.ortal}}
jobs:
  create-issue:
    runs-on: ubuntu-latest
    steps:
      - name: Create issue using Rest api
        run: |
          curl --request POST \
          --url https://api.github.com/repos/${{github.repository}}/issues \
          --header 'authorization: Bearer ${{secrets.GITHUB_TOKEN}}' \
          --header 'content-type: application/json' \
          --data '{"title":"Automated issue for commit: ${{github.sha}}",
          "body": "This issue was automatically created by the Github Action workflow **${{ github.workflow }}**.\n\n
          The commit hash was: _${{ github.sha }}_."}'


  run-github-actions:
    runs-on: ubuntu-latest
    steps:
      - name: list files before checkout
        run: |
          pwd
          ls -a
          echo "WF_ENV is ${WF_ENV}"
      - name: checkout
        uses: actions/checkout@v2
      - name: list files after checkout
        run: |
          pwd
          ls -a
          echo $GITHUB_SHA
          echo $GITHUB_REPOSITORY
          echo $GITHUB_WORKSPACE
      - name: simple JS Actions
        id: greet
        uses: actions/hello-world-javascript-action@v1.1
        with:
          who-to-greet: John
      - name: Log greeting time
        run: echo "${{steps.greet.outputs.time}}"

